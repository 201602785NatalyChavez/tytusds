!function(){function t(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{tpvR:function(e,n,r){"use strict";r.r(n),r.d(n,"MerkleModule",function(){return x});var a,s,l,c=r("ofXK"),h=r("M0ag"),u=r("tyNb"),d=r("LRne"),f=function t(e){o(this,t),this.hash=e,this.left=null,this.right=null},b=function t(e){o(this,t),this.value=e},g=function(){function t(){o(this,t),this.tophash=null,this.datablock=[],this.dot="",this.index=0,this.string=!1}return i(t,[{key:"add",value:function(t){this.datablock.push(new b(t))}},{key:"createTree",value:function(t){this.tophash=new f(0),this._createTree(this.tophash,t)}},{key:"_createTree",value:function(t,e){e>0&&(t.left=new f(0),t.right=new f(0),this._createTree(t.left,e-1),this._createTree(t.right,e-1))}},{key:"genHash",value:function(t,e){if(null!=t)if(this.genHash(t.left,e),this.genHash(t.right,e),null==t.left&&null==t.right){t.left=this.datablock[e-this.index--];var n=new Uint32Array(1);window.crypto.getRandomValues(n),t.hash=n[0]}else t.hash=(parseInt(t.left.hash,16)+parseInt(t.right.hash,16)).toString(16)}},{key:"preorder",value:function(t){null!=t&&(console.log(t.value),this.preorder(t.left),this.preorder(t.right))}},{key:"auth",value:function(){for(var t=1;Math.pow(2,t)<this.datablock.length;)t+=1;for(var e=this.datablock.length;e<Math.pow(2,t);e++)this.datablock.push(new b(100*e));this.index=Math.pow(2,t),this.createTree(t),this.genHash(this.tophash,Math.pow(2,t)),this.preorder(this.tophash)}},{key:"show",value:function(){this.datablock.forEach(function(t){return document.getElementById("log").innerHTML+=t.value+" "})}},{key:"dotgen",value:function(t){null!=t&&(null!=t.left&&t.left instanceof b&&(this.dot+='"'+t.left.value+'" [color=gray] -> "0x'+t.hash+'";'),t.left instanceof f&&(null!=t.left&&(this.dot+='"0x'+t.left.hash+'" -> "0x'+t.hash+'";'),null!=t.right&&(this.dot+='"0x'+t.right.hash+'" -> "0x'+t.hash+'";')),this.dotgen(t.left),this.dotgen(t.right))}}]),t}(),v=r("fXoL"),p=r("3Pt+"),y=["siteConfigNetwork"],w=[{path:"",component:(a=function(){function e(){o(this,e),this.bst=new g,this.x="",this.valores=0,this.fileContent="",this.setting={element:{dynamicDownload:null}}}return i(e,[{key:"ngOnInit",value:function(){}},{key:"Insertar",value:function(){8==this.x.charCodeAt(0)?console.log("No hay nada"):this.x.charCodeAt(0)>=48&&this.x.charCodeAt(0)<=57?(this.bst.add(parseInt(this.x)),this.valores+=1):(this.bst.string=!0,this.bst.add(this.x),this.bst.string=!1,this.valores+=1),this.x="",console.log("----------------------"),this.x=null,this.visit(),console.log("TOPHASH",this.bst.tophash),this.listaEnlJSon=JSON.stringify(this.bst)}},{key:"visit",value:function(){if(this.valores%2==0){this.drawSvgNetwork();var t=this.getTreeData();this.loadVisTree(t)}}},{key:"loadVisTree",value:function(t){this.network=new vis.Network(this.networkContainer.nativeElement,t,{nodes:{widthConstraint:80},layout:{hierarchical:{parentCentralization:!0,direction:"DU",sortMethod:"directed",shakeTowards:"roots"}}}),this.network.on("hoverNode",function(t){console.log("hoverNode Event:",t)}),this.network.on("blurNode",function(t){console.log("blurNode event:",t)})}},{key:"getTreeData",value:function(){this.bst.auth(),this.bst.dot="{node [shape=box];",this.bst.dotgen(this.bst.tophash),this.bst.dot+="}";var t=vis.parseDOTNetwork(this.bst.dot);return console.log("DOT",this.bst.dot),this.bst.dot="",{nodes:t.nodes,edges:t.edges}}},{key:"drawSvgNetwork",value:function(){window.vis=r("WaTm")}},{key:"cargarArchivo",value:function(t){var e=t[0],n=new FileReader,i=this;n.onloadend=function(t){i.fileContent=n.result.toString()},n.readAsText(e),this.strCarga=i.fileContent}},{key:"clickCargar",value:function(){this.strCarga=this.fileContent,console.log(this.strCarga);var e=JSON.parse(this.strCarga);console.log(e),null!=e.animacion&&null!=e.animacion&&(this.velocidadAnimacion=e.animacion),null!=e.repeticion&&(this.opcionRepeticiones=e.repeticion),null!=e.posicion&&("Inicio"!=e.posicion&&"Fin"!=e.posicion||(this.opcionOperar=e.posicion));var n,i=t(e.valores);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.bst.add(o)}}catch(r){i.e(r)}finally{i.f()}this.visit()}},{key:"downloadJson",value:function(){var t=this;this.fakeValidateUserData().subscribe(function(e){t.dyanmicDownloadByHtmlTag({fileName:"Merkle.json",text:e})})}},{key:"fakeValidateUserData",value:function(){return Object(d.a)(this.listaEnlJSon)}},{key:"dyanmicDownloadByHtmlTag",value:function(t){this.setting.element.dynamicDownload||(this.setting.element.dynamicDownload=document.createElement("a"));var e=this.setting.element.dynamicDownload,n=t.fileName.indexOf(".json")>-1?"text/json":"text/plain";e.setAttribute("href","data:".concat(n,";charset=utf-8,").concat(encodeURIComponent(t.text))),e.setAttribute("download",t.fileName);var i=new MouseEvent("click");e.dispatchEvent(i)}}]),e}(),a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=v.Kb({type:a,selectors:[["app-merkle"]],viewQuery:function(t,e){var n;1&t&&v.Fc(y,1),2&t&&v.tc(n=v.gc())&&(e.networkContainer=n.first)},decls:30,vars:2,consts:[[1,"row"],[1,"col-xs-2","text-xs-center"],[1,"card","mb-3"],[1,"card-body"],["placeholder","Ingresar nuevo valor",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","mb-3","text-center","my-auto"],[1,"card-body","align-items-center"],["type","button",1,"btn","btn-secondary","mr-3",3,"click"],[1,"col-xl-6","text-xs-center"],[1,"form-group"],["type","file",3,"change"],["type","submit",1,"btn","btn-secondary",3,"click"],["id","mynetwork"],["siteConfigNetwork",""],["rows","2",1,"form-control"]],template:function(t,e){1&t&&(v.Vb(0,"div"),v.Vb(1,"h4"),v.Bc(2,"Merkle"),v.Ub(),v.Vb(3,"div",0),v.Vb(4,"div",1),v.Vb(5,"div",2),v.Vb(6,"div",3),v.Vb(7,"input",4),v.fc("ngModelChange",function(t){return e.x=t}),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Vb(8,"div",1),v.Vb(9,"div",5),v.Vb(10,"div",6),v.Vb(11,"button",7),v.fc("click",function(){return e.Insertar()}),v.Bc(12,"Agregar"),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Vb(13,"div",0),v.Vb(14,"div",8),v.Vb(15,"fieldset",9),v.Vb(16,"input",10),v.fc("change",function(t){return e.cargarArchivo(t.target.files)}),v.Ub(),v.Vb(17,"button",11),v.fc("click",function(){return e.clickCargar()}),v.Bc(18,"Cargar a lista dinamica"),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Rb(19,"br"),v.Rb(20,"div",12,13),v.Vb(22,"div",8),v.Vb(23,"fieldset",9),v.Vb(24,"label"),v.Bc(25,"JSON salida"),v.Ub(),v.Vb(26,"textarea",14),v.Bc(27),v.Ub(),v.Vb(28,"button",11),v.fc("click",function(){return e.downloadJson()}),v.Bc(29,"Guardar"),v.Ub(),v.Ub(),v.Ub(),v.Ub()),2&t&&(v.Db(7),v.mc("ngModel",e.x),v.Db(20),v.Cc(e.listaEnlJSon))},directives:[p.a,p.e,p.f],styles:["","#mynetwork[_ngcontent-%COMP%] {\n        width: 1200px;\n        height: 500px;\n        border: 1px solid lightgray;\n    }"]}),a)}],m=((s=function t(){o(this,t)}).\u0275fac=function(t){return new(t||s)},s.\u0275mod=v.Ob({type:s}),s.\u0275inj=v.Nb({imports:[[u.f.forChild(w)],u.f]}),s),k=r("QibW"),x=((l=function t(){o(this,t)}).\u0275fac=function(t){return new(t||l)},l.\u0275mod=v.Ob({type:l}),l.\u0275inj=v.Nb({imports:[[k.c,c.b,m,h.b,p.b]]}),l)}}])}();