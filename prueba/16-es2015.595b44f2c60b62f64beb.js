(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{tpvR:function(t,e,n){"use strict";n.r(e),n.d(e,"MerkleModule",function(){return p});var i=n("ofXK"),s=n("M0ag"),o=n("tyNb"),r=n("LRne");class a{constructor(t){this.hash=t,this.left=null,this.right=null}}class l{constructor(t){this.value=t}}class h{constructor(){this.tophash=null,this.datablock=[],this.dot="",this.index=0,this.string=!1}add(t){this.datablock.push(new l(t))}createTree(t){this.tophash=new a(0),this._createTree(this.tophash,t)}_createTree(t,e){e>0&&(t.left=new a(0),t.right=new a(0),this._createTree(t.left,e-1),this._createTree(t.right,e-1))}genHash(t,e){if(null!=t)if(this.genHash(t.left,e),this.genHash(t.right,e),null==t.left&&null==t.right){t.left=this.datablock[e-this.index--];var n=new Uint32Array(1);window.crypto.getRandomValues(n),t.hash=n[0]}else t.hash=(parseInt(t.left.hash,16)+parseInt(t.right.hash,16)).toString(16)}preorder(t){null!=t&&(console.log(t.value),this.preorder(t.left),this.preorder(t.right))}auth(){for(var t=1;Math.pow(2,t)<this.datablock.length;)t+=1;for(var e=this.datablock.length;e<Math.pow(2,t);e++)this.datablock.push(new l(100*e));this.index=Math.pow(2,t),this.createTree(t),this.genHash(this.tophash,Math.pow(2,t)),this.preorder(this.tophash)}show(){this.datablock.forEach(t=>document.getElementById("log").innerHTML+=t.value+" ")}dotgen(t){null!=t&&(null!=t.left&&t.left instanceof l&&(this.dot+='"'+t.left.value+'" [color=gray] -> "0x'+t.hash+'";'),t.left instanceof a&&(null!=t.left&&(this.dot+='"0x'+t.left.hash+'" -> "0x'+t.hash+'";'),null!=t.right&&(this.dot+='"0x'+t.right.hash+'" -> "0x'+t.hash+'";')),this.dotgen(t.left),this.dotgen(t.right))}}var c=n("fXoL"),d=n("3Pt+");const b=["siteConfigNetwork"],u=[{path:"",component:(()=>{class t{constructor(){this.bst=new h,this.x="",this.valores=0,this.fileContent="",this.setting={element:{dynamicDownload:null}}}ngOnInit(){}Insertar(){8==this.x.charCodeAt(0)?console.log("No hay nada"):this.x.charCodeAt(0)>=48&&this.x.charCodeAt(0)<=57?(this.bst.add(parseInt(this.x)),this.valores+=1):(this.bst.string=!0,this.bst.add(this.x),this.bst.string=!1,this.valores+=1),this.x="",console.log("----------------------"),this.x=null,this.visit(),console.log("TOPHASH",this.bst.tophash),this.listaEnlJSon=JSON.stringify(this.bst)}visit(){if(this.valores%2==0){this.drawSvgNetwork();var t=this.getTreeData();this.loadVisTree(t)}}loadVisTree(t){this.network=new vis.Network(this.networkContainer.nativeElement,t,{nodes:{widthConstraint:80},layout:{hierarchical:{parentCentralization:!0,direction:"DU",sortMethod:"directed",shakeTowards:"roots"}}}),this.network.on("hoverNode",function(t){console.log("hoverNode Event:",t)}),this.network.on("blurNode",function(t){console.log("blurNode event:",t)})}getTreeData(){this.bst.auth(),this.bst.dot="{node [shape=box];",this.bst.dotgen(this.bst.tophash),this.bst.dot+="}";var t=vis.parseDOTNetwork(this.bst.dot);return console.log("DOT",this.bst.dot),this.bst.dot="",{nodes:t.nodes,edges:t.edges}}drawSvgNetwork(){window.vis=n("WaTm")}cargarArchivo(t){let e=t[0],n=new FileReader,i=this;n.onloadend=function(t){i.fileContent=n.result.toString()},n.readAsText(e),this.strCarga=i.fileContent}clickCargar(){this.strCarga=this.fileContent,console.log(this.strCarga);let t=JSON.parse(this.strCarga);console.log(t),null!=t.animacion&&null!=t.animacion&&(this.velocidadAnimacion=t.animacion),null!=t.repeticion&&(this.opcionRepeticiones=t.repeticion),null!=t.posicion&&("Inicio"!=t.posicion&&"Fin"!=t.posicion||(this.opcionOperar=t.posicion));for(let e of t.valores)this.bst.add(e);this.visit()}downloadJson(){this.fakeValidateUserData().subscribe(t=>{this.dyanmicDownloadByHtmlTag({fileName:"Merkle.json",text:t})})}fakeValidateUserData(){return Object(r.a)(this.listaEnlJSon)}dyanmicDownloadByHtmlTag(t){this.setting.element.dynamicDownload||(this.setting.element.dynamicDownload=document.createElement("a"));const e=this.setting.element.dynamicDownload,n=t.fileName.indexOf(".json")>-1?"text/json":"text/plain";e.setAttribute("href",`data:${n};charset=utf-8,${encodeURIComponent(t.text)}`),e.setAttribute("download",t.fileName);var i=new MouseEvent("click");e.dispatchEvent(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Kb({type:t,selectors:[["app-merkle"]],viewQuery:function(t,e){if(1&t&&c.Fc(b,1),2&t){let t;c.tc(t=c.gc())&&(e.networkContainer=t.first)}},decls:30,vars:2,consts:[[1,"row"],[1,"col-xs-2","text-xs-center"],[1,"card","mb-3"],[1,"card-body"],["placeholder","Ingresar nuevo valor",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","mb-3","text-center","my-auto"],[1,"card-body","align-items-center"],["type","button",1,"btn","btn-secondary","mr-3",3,"click"],[1,"col-xl-6","text-xs-center"],[1,"form-group"],["type","file",3,"change"],["type","submit",1,"btn","btn-secondary",3,"click"],["id","mynetwork"],["siteConfigNetwork",""],["rows","2",1,"form-control"]],template:function(t,e){1&t&&(c.Vb(0,"div"),c.Vb(1,"h4"),c.Bc(2,"Merkle"),c.Ub(),c.Vb(3,"div",0),c.Vb(4,"div",1),c.Vb(5,"div",2),c.Vb(6,"div",3),c.Vb(7,"input",4),c.fc("ngModelChange",function(t){return e.x=t}),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(8,"div",1),c.Vb(9,"div",5),c.Vb(10,"div",6),c.Vb(11,"button",7),c.fc("click",function(){return e.Insertar()}),c.Bc(12,"Agregar"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Vb(13,"div",0),c.Vb(14,"div",8),c.Vb(15,"fieldset",9),c.Vb(16,"input",10),c.fc("change",function(t){return e.cargarArchivo(t.target.files)}),c.Ub(),c.Vb(17,"button",11),c.fc("click",function(){return e.clickCargar()}),c.Bc(18,"Cargar a lista dinamica"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Rb(19,"br"),c.Rb(20,"div",12,13),c.Vb(22,"div",8),c.Vb(23,"fieldset",9),c.Vb(24,"label"),c.Bc(25,"JSON salida"),c.Ub(),c.Vb(26,"textarea",14),c.Bc(27),c.Ub(),c.Vb(28,"button",11),c.fc("click",function(){return e.downloadJson()}),c.Bc(29,"Guardar"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Db(7),c.mc("ngModel",e.x),c.Db(20),c.Cc(e.listaEnlJSon))},directives:[d.a,d.e,d.f],styles:["","#mynetwork[_ngcontent-%COMP%] {\n        width: 1200px;\n        height: 500px;\n        border: 1px solid lightgray;\n    }"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({imports:[[o.f.forChild(u)],o.f]}),t})();var f=n("QibW");let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({imports:[[f.c,i.b,g,s.b,d.b]]}),t})()}}]);